names(spot) <- terra::varnames(spot)
ind <- eval(parse(text = stringr::str_replace_all(spot_formula(indice), "spot", "spot")))
spot_plotDiff(diff)
library(oiseauSpot)
inds <- purrr::map(c(date0, dates), ~ spot_indice(date_spot = .x, date_mnh = date_mnh))
library(oiseauSpot)
inds <- purrr::map(c(date0, dates), ~ spot_indice(date_spot = .x, date_mnh = date_mnh))
library(oiseauSpot)
inds <- purrr::map(c(date0, dates), ~ spot_indice(date_spot = .x, date_mnh = date_mnh))
library(oiseauSpot)
inds <- purrr::map(c(date0, dates), ~ spot_indice(date_spot = .x, date_mnh = date_mnh))
names(inds) <- c(date0, dates)
date0
date1 <- dates[1]
ind0 <- spot_indice(date_spot = date0, date_mnh = date_mnh)
ind1 <- spot_indice(date_spot = date1, date_mnh = date_mnh)
ras_dif <- terra::scale(ind1)-terra::scale(ind0)
ras_dif
terra::plot(ras_dif)
seuil_diff_spot
ras_dif[ras_dif < seuil_diff_spot] <- 1
ras_dif[ras_dif >= seuil_diff_spot] <- 0
terra::plot(ras_dif)
ras_dif <- terra::scale(ind1)-terra::scale(ind0)
terra::plot(ras_dif)
mnhs <- terra::rast(path_mnh_ts)
mnhs
library(oiseauSpot)
maj0 <- spot_disparitions(date0 = date0, date1 = dates[1], date_mnh = date_mnh)
maj0
mnhs
mnhs <- terra::rast(path_mnh_ts)
mnhs
mnhs <- mnhs["mnh_ts^"]
mnhs <- mnhs["^mnh_ts"]
mnh0 <- mnhs[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]
mnh0
as.Date(terra::time(mnhs)) == as.Date(date_mnh)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0
mnh0c <- mnh0 * maj0
maj0
mnh0
maj0 <- spot_disparitions(date0 = date0, date1 = dates[1], date_mnh = date_mnh)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnhs <- terra::rast(path_mnh_ts)
mnhs <- mnhs["^mnh_ts"] # mnh initiaux non corrigés
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
mnh0c
terra::plot(c(mnh0, mnh0c))
terra::sds(mnhs, mnh0c)
mnhs
unlist(mnhs)
terra::nlyr(mnhs)
names(mnhs)
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_ts_1
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- do.call(terra::sds, ls_mnh)
mnhs0 <- terra::sds(ls_mnh)
mnhs0
purrr::map_chr(ls_mnh, terra::time)
purrr::map_chr(ls_mnh, ~as.character(terra::time(.x)))
mnh0c
terra::time(mnh0c) <- date0
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::sds(ls_mnh)
purrr::map_chr(ls_mnh, ~as.character(terra::time(.x)))
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::sds(ls_mnh)
purrr::map_chr(ls_mnh, ~as.character(terra::time(.x)))
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
ls_mnh
terra::sds(ls_mnh)
mnhs0 <- c(ls_mnh)
mnhs0
mnhs0 <- do.call(c, ls_mnh)
mnhs0
mnhs0 <- terra::rast(do.call(c, ls_mnh))
mnhs0
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
mnhs0
unlink(dest_mnh)
dest_mnh = oiseauData::data_conf("path_mnh_ts")
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
maj <- function(date0, date1, mnh_cor){
maj0 <- spot_disparitions(date0 = date0, date1 = dates1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
}
maj <- function(date0, date1, mnh_cor){
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = dates1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
}
library(oiseauSpot)
oiseauData::data_dir("/var/partage/oiseau/projets_suivi/sdumas/a/")
ext = oiseauData::data_conf("shp")
path_spot_ts = oiseauData::data_conf("path_spot_ts")
path_mnh_ts = oiseauData::data_conf("path_mnh_ts")
dest_masques = oiseauData::data_conf("path_mnh_mask_ts")
dest_mnh = oiseauData::data_conf("path_mnh_ts")
buffer  = oiseauData::data_conf("buffer")
seuil_diff_spot = oiseauData::data_conf("seuil_diff_spot")
replace = FALSE
mnhs <- terra::rast(path_mnh_ts)
mnhs <- mnhs["^mnh_ts"] # mnh initiaux non corrigés
date_mnh <- max(terra::time(mnhs)) %>% as.Date()
spots <- terra::rast(path_spot_ts)
dates_spot <- terra::time(spots) %>% as.Date() %>% unique() %>% sort()
date0 <- max(dates_spot[which(format(dates_spot, "%Y") < format(date_mnh, "%Y"))])
dates <- dates_spot[which(dates_spot > date0)]
maj <- function(date0, date1, mnh_cor){
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = dates1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
}
maj(date0, dates[1], mnh_cor = FALSE)
maj <- function(date0, date1, mnh_cor){
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
}
maj(date0, dates[1], mnh_cor = FALSE)
mnhs <- terra::rast(path_mnh_ts)
mnhs
mnhs0 <- mnhs[[1:2]]
mnhs0
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
mnhs <- terra::rast(path_mnh_ts)
mnhs
mnh_cor = FALSE
date1=dates[1]
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
date_mnh
date_mnh <- max(terra::time(mnhs)) %>% as.Date()
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh_cor
date0
date1
date_mnh
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnhs <- terra::rast(path_mnh_ts)
mnh_cor
mnhs <- mnhs["^mnh_ts"]
terra::time(mnhs)
as.Date(terra::time(mnhs)) == as.Date(date_mnh)
mnh <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
ind0 <- spot_indice(date_spot = date0, date_mnh = date_mnh) %>% terra::resample(mnh)
ind0 <- spot_indice(date_spot = date0, date_mnh = date_mnh) %>% terra::resample(mnh)
spots <- terra::rast(path_spot_ts)
spot <- spots[[which(as.Date(terra::time(spots)) == as.Date(date_spot))]]
names(spot) <- terra::varnames(spot)
ind <- eval(parse(text = stringr::str_replace_all(spot_formula(indice), "spot", "spot")))
is.null(path_mnh_ts)
mnhs <- terra::rast(path_mnh_ts)
mnh <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
cr <- suppressWarnings(spot_crowns(date_mnh = date_mnh))
date_mnh
cr <- suppressWarnings(spot_crowns(date_mnh = date_mnh))
mnhs <- terra::rast(path_mnh_ts)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
h0 <- mnh0 %>% terra::crop(as(ext %>% st_buffer(buffer), "SpatVector")) %>%
terra::mask(as(ext %>% st_buffer(buffer), "SpatVector"))
lim_h_rege
h0
mnh0
terra::plot(mnh0)
terra::plot(mnhs)
path_mnh_ts
mnhs <- terra::rast(path_mnh_ts)
mnhs
terra::plot(mnhs)
mnhs <- terra::rast(path_mnh_ts)
plot(mnhs)
terra::plot(mnhs)
terra::plot(mnhs0)
oiseauData::data_mnh()
mnhs <- terra::rast(path_mnh_ts)
terra::plot(mnhs)
mnhs <- terra::rast(path_mnh_ts)
mnhs <- mnhs["^mnh_ts"] # mnh initiaux non corrigés
date_mnh <- max(terra::time(mnhs)) %>% as.Date()
spots <- terra::rast(path_spot_ts)
dates_spot <- terra::time(spots) %>% as.Date() %>% unique() %>% sort()
date0 <- max(dates_spot[which(format(dates_spot, "%Y") < format(date_mnh, "%Y"))])
dates <- dates_spot[which(dates_spot > date0)]
maj <- function(date0, date1, date_mnh, mnh_cor){
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
unlink(dest_mnh)
terra::writeCDF(mnhs0, dest_mnh)
}
maj(date0, dates[1], date_mnh, mnh_cor = FALSE)
mnhs2 <- terra::rast(path_mnh_ts)
terra::plot(mnhs2)
oiseauData::data_mnh()
date1=dates[1]
date_mnh
mnh_cor
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
ls_mnh
terra::plot(ls_mnh[[1]])
terra::plot(ls_mnh[[2]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
terra::plot(ls_mnh$mnh_ts_2)
terra::plot(ls_mnh$mnh_cor_0)
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
terra::plot(mnhs0)
dest_mnh
maj <- function(date0, date1, date_mnh, mnh_cor){
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
terra::writeCDF(mnhs0, dest_mnh, overwrite = TRUE)
}
mnhs0
terra::varnames(mnhs0) <- names(ls_mnh)
maj <- function(date0, date1, date_mnh, mnh_cor){
mnhs <- terra::rast(path_mnh_ts)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh0 <- mnhs[[as.Date(terra::time(mnhs)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
ls_mnh <- purrr::map(names(mnhs), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnhs0 <- terra::rast(do.call(c, ls_mnh))
terra::plot(mnhs0)
terra::time(mnhs0) <- as.Date(purrr::map_chr(ls_mnh, ~as.character(terra::time(.x))))
terra::varnames(mnhs0) <- names(ls_mnh)
terra::writeCDF(mnhs0, dest_mnh, overwrite = TRUE)
}
maj(date0, dates[1], date_mnh, mnh_cor = FALSE)
mnhs2 <- terra::rast(path_mnh_ts)
mnhs2
terra::varnames(mnhs0) <- names(ls_mnh)
mnhs0
terra::sds(mnhs0)
mnhs <- terra::rast(path_mnh_ts)
mnhs
mnhs_non_cor <- mnhs[terra::varnames(mnhs) == "mnh_ts"]
mnhs_cor <- mnhs[terra::varnames(mnhs) == "mnh_cor"]
mnhs_cor
mnhs_cor <- mnhs[[terra::varnames(mnhs) == "mnh_cor"]]
mnhs_non_cor <- mnhs[[terra::varnames(mnhs) == "mnh_ts"]]
mnhs_cor <- tryCatch(mnhs[[terra::varnames(mnhs) == "mnh_cor"]],
error = function(e) NULL)
mnhs_cor
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnhs <- terra::rast(path_mnh_ts)
terra::plot(mnhs)
oiseauData::data_mnh()
mnhs <- terra::rast(path_mnh_ts)
mnhs_non_cor <- mnhs[[terra::varnames(mnhs) == "mnh_ts"]]
mnhs_cor <- tryCatch(mnhs[[terra::varnames(mnhs) == "mnh_cor"]],
error = function(e) NULL)
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh_cor
mnh0 <- mnhs_non_cor
mnh0 <- mnh0[[as.Date(terra::time(mnh0)) == as.Date(date_mnh)]]
mnh0
mnhs_non_cor
terra::varnames(mnhs)
mnhs
mnhs <- terra::rast(path_mnh_ts)
if("mnh_cor" %in% terra::varnames(mnhs)){
mnhs_non_cor <- mnhs[[terra::varnames(mnhs) == "mnh_ts"]]
mnhs_cor <- tryCatch(mnhs[[terra::varnames(mnhs) == "mnh_cor"]],
error = function(e) NULL)
}else{
mnhs_non_cor <- mnhs
mnhs_cor <- NULL
}
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
mnh_cor
mnh0 <- mnhs_non_cor
mnh0 <- mnh0[[as.Date(terra::time(mnh0)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
mnhs_cor
terra::varnames(mnh_cor_new) <- "mnh_cor"
mnh_cor_new <- mnh0c
terra::varnames(mnh_cor_new) <- "mnh_cor"
mnh_cor_new
terra::sds(mnhs_non_cor, mnhs0)
terra::sds(mnhs_non_cor, mnh_cor_new)
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
mnhs_new <- terra::sds(mnh_ts = mnhs_non_cor, mnh_cor = mnh_cor_new)
terra::varnames(mnhs_new) <- c("mnh_ts, mnh_cor")
mnhs_new
terra::varnames(mnhs_new)
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
terra::varnames(mnhs_new) <- c("mnh_ts", "mnh_cor")
mnhs_new
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
length(mnhs_non_cor)
terra::varnames(mnhs_new) <- c(rep("mnh_ts", length(mnhs_non_cor)), rep("mnh_cor", length(mnhs_cor)))
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
terra::names(mnhs_new) <- c(rep("mnh_ts", length(mnhs_non_cor)), rep("mnh_cor", length(mnhs_cor)))
names(mnhs_new) <- c(rep("mnh_ts", length(mnhs_non_cor)), rep("mnh_cor", length(mnhs_cor)))
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
mnhs_new
names(mnhs_non_cor) <- "mnh_ts"
names(mnhs_non_cor) <- rep("mnh_ts", length(mnhs_non_cor))
length(mnhs_non_cor)
names(mnhs_non_cor)
names(mnhs_non_cor) <- rep("mnh_ts", length(names(mnhs_non_cor)))
names(mnhs_cor) <- rep("mnh_cor", length(names(mnhs_cor)))
names(mnh_cor_new) <- rep("mnh_cor", length(names(mnh_cor_new)))
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
mnhs_new
terra::varnames(mnhs_new)
terra::varnames(mnhs_non_cor)
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
if(mnh_cor){
mnh0 <- mnhs_cor
}else{
mnh0 <- mnhs_non_cor
}
mnh0 <- mnh0[[as.Date(terra::time(mnh0)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
if(is.null(mnh_cor)){
mnh_cor_new <- mnh0c
}else{
ls_mnh <- purrr::map(names(mnhs_cor), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs)
ls_mnh$mnh_cor_0 <- mnh0c
mnh_cor_new <- terra::rast(do.call(c, ls_mnh))
}
ls_mnh <- purrr::map(names(mnhs_cor), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs_cor)
mnhs_cor
is.null(mnh_cor)
(is.null(mnhs_cor))
if(is.null(mnhs_cor)){
mnh_cor_new <- mnh0c
}else{
ls_mnh <- purrr::map(names(mnhs_cor), ~mnhs[[.x]])
names(ls_mnh) <- names(mnhs_cor)
ls_mnh$mnh_cor_0 <- mnh0c
mnh_cor_new <- terra::rast(do.call(c, ls_mnh))
}
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
names(mnhs_new) <- c("mnh_ts", "mnh_cor")
mnhs_new
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
names(mnhs_non_cor)
mnhs <- terra::rast(path_mnh_ts)
if("mnh_cor" %in% terra::varnames(mnhs)){
mnhs_non_cor <- mnhs[[terra::varnames(mnhs) == "mnh_ts"]]
mnhs_cor <- tryCatch(mnhs[[terra::varnames(mnhs) == "mnh_cor"]],
error = function(e) NULL)
}else{
mnhs_non_cor <- mnhs
mnhs_cor <- NULL
}
maj0 <- spot_disparitions(date0 = date0, date1 = date1, date_mnh = date_mnh, mnh_cor)
if(mnh_cor){
mnh0 <- mnhs_cor
}else{
mnh0 <- mnhs_non_cor
}
mnh0 <- mnh0[[as.Date(terra::time(mnh0)) == as.Date(date_mnh)]]
mnh0c <- mnh0 * maj0
terra::time(mnh0c) <- date1
if(is.null(mnhs_cor)){
mnh_cor_new <- mnh0c
}else{
ls_mnh <- purrr::map(names(mnhs_cor), ~mnhs[[.x]])
ls_mnh$mnh_cor_0 <- mnh0c
mnh_cor_new <- terra::rast(do.call(c, ls_mnh))
}
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
names(mnhs_new) <- c("mnh_ts", "mnh_cor")
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
names(mnhs_non_cor)
names(mnh_cor_new)
# names(mnhs_non_cor) <- rep("mnh_ts", length(names(mnhs_non_cor)))
names(mnh_cor_new) <- paste0("mnh_cor_", 1:length(names(mnh_cor_new)))
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
names(mnhs_new) <- c("mnh_ts", "mnh_cor")
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
mnhs_new <- terra::sds(mnhs_non_cor, mnh_cor_new)
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
terra::writeCDF(mnh_cor_new, dest_mnh, varnames = "mnh_cor", overwrite = TRUE)
terra::writeCDF(mnh_cor_new, dest_mnh, varname = "mnh_cor", overwrite = TRUE)
mnhs2 <- terra::rast(path_mnh_ts)
mnhs2
oiseauData::data_mnh()
terra::writeCDF(mnh_cor_new, dest_mnh, varname = "mnh_cor", overwrite = FALSE)
mnhs_new <- c(mnhs_non_cor, mnh_cor_new)
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
mnhs2 <- terra::rast(path_mnh_ts)
mnhs2
mnhs_new
mnhs_non_cor
mnh_cor_new
mnhs_new <- terra::rast(c(mnhs_non_cor, mnh_cor_new))
mnhs_new
terra::time(mnhs_new)
mnhs_new <- terra::add(mnhs_non_cor, mnh_cor_new))
mnhs_new <- terra::add(mnhs_non_cor, mnh_cor_new)
terra::time(mnhs_new) <- c(terra::time(mnhs_non_cor), terra::time(mnh_cor_new))
terra::time(mnhs_new)
terra::time(mnhs_new) <- c(terra::time(mnhs_non_cor) %>% as.Date(),
terra::time(mnh_cor_new) %>% as.Date())
terra::time(mnhs_new)
terra::writeCDF(mnhs_new, dest_mnh, overwrite = TRUE)
mnhs2 <- terra::rast(path_mnh_ts)
mnhs2
ls <- data_conf("dates_mnh", set = "non défini",
classe = "texte multi",  origine = "",
descr = "dates des prises de vue des MNH", replace = replace)
ls <- dc("dates_mnh", set = "non défini",
classe = "texte multi",  origine = "",
descr = "dates des prises de vue des MNH", replace = replace)
length(dates[-1])
library(oiseauSpot)
oiseauData::data_dir("/var/partage/oiseau/projets_suivi/sdumas/aa/")
plot(dc(shp))
plot(dc("shp"))
oiseauSuivi::run_app()
.dir
dc("path_log")
library(dplyr)
dc("path_log")
dc(".path_log")
dc(".log")
dc("log")
dc(liste = T)
oiseauSuivi::run_app()
dest_masques
library(oiseauSpot)
